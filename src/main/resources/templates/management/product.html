<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="/css/main/main.css" type="text/css" />
  <link rel="stylesheet" href="/css/main/header.css" type="text/css" />
  <title>상품</title>
</head>
<body>
<div id="header" th:replace="~{main/mainHeader}"></div>
<div id="wrap">
  <div class="search_wrap">
    <p>전체상품</p>
    <form class="search" action="/products/search" method="get">
      <input type="text" class="seach_input" placeholder="입력" name="keyword" />
      <div class="search_icon">
        <button type="submit" style="border-style: none; background: transparent">
          <img src="/images/main/search.png" alt="검색" />
        </button>
      </div>
    </form>
    <div class="category_list">
      <!--      <p>카테고리</p>-->
      <ul>
        <li class="category_menu active">전체보기</li>
        <!--        <li class="category_menu">섭취목적</li>-->
        <li class="category_menu">건강고민</li>
        <li class="category_menu">인기상품</li>
        <li class="category_menu">할인</li>
      </ul>
    </div>
    <div class="category_wrap">
      <p>어떤 프로틴이 필요하세요?</p>
      <ul>
        <li class="active">
          <img src="/images/main/diet.png" alt="" />
          <span>다이어트</span>
        </li>
        <li>
          <img src="/images/main/volume.png" alt="" />
          <span>증량</span>
        </li>
        <li>
          <img src="/images/main/digest.png" alt="" />
          <span>소화</span>
        </li>
        <li>
          <img src="/images/main/ldl.png" alt="" />
          <span>콜레스테롤</span>
        </li>
      </ul>
      <ul>
        <li>
          <img src="/images/main/cheap.png" alt="" />
          <span>할인</span>
        </li>
        <!--        <li>-->
        <!--          <img src="/images/main/whey.png" alt="" />-->
        <!--          <span>유청</span>-->
        <!--        </li>-->
        <!--        <li>-->
        <!--          <img src="/images/main/casein.png" alt="" />-->
        <!--          <span>카제인</span>-->
        <!--        </li>-->
        <!--        <li>-->
        <!--          <img src="/images/main/plant.png" alt="" />-->
        <!--          <span>식물성</span>-->
        <!--        </li>-->
      </ul>
    </div>
  </div>
  <div class="recomment_wrap">
    <img src="/images/main/mark.png" alt="" />
    <p>내 몸에 꼭 맞는 프로틴 추천받기</p>
    <img src="/images/main/mark.png" alt="" />
  </div>
  <div class="survey_wrap">
    <div class="survey_btn">
      <a href="/templates/main/survey_start.html">설문조사 하러가기</a>
    </div>
  </div>
  <!-- 카테고리별 상품 보여지는 -->
  <div class="products_wrap">
    <p>인기 프로틴 <span class="footer_point">TOP 10</span></p>
    <ul class="product_category">
      <li class="product_cate active" id="all_category">전체</li>
      <li class="product_cate" id="age_category">연령별</li>
      <li class="product_cate" id="health_category">건강고민별</li>
      <li class="product_cate" id="vegan_category">비건</li>
      <li class="product_cate" id="diet_category">다이어트</li>
      <li class="product_cate" id="discount_category">할인</li>
    </ul>
    <ul class="age_list">
      <li class="age_cate active">10~20대</li>
      <li class="age_cate">30대</li>
      <li class="age_cate">40대</li>
      <li class="age_cate">50대</li>
      <li class="age_cate">60대</li>
    </ul>
    <div class="filtered_products">
      <ul class="rank_product">
        <a href="product_detail.html" target="_blank">
          <li>
            <img src="/images/main/rank1.png" alt="" />
            <p>마이프로틴</p>
          </li>
        </a>
        <li>
          <img src="/images/main/rank2.png" alt="" />
          <p>상품명</p>
        </li>
        <li>
          <img src="/images/main/rank3.png" alt="" />
          <p>상품명</p>
        </li>
      </ul>
      <ul class="others_product" id="product_list">
        <li th:each="product : ${products}">
          <a th:href="@{/products/{id}(id=${product.productId})}">
            <!-- 이미지 반복 출력 -->
            <div class="product-images">
              <img th:each="imgUrl : ${product.productImages}" th:src="@{${imgUrl}}" alt="상품 이미지" style="max-width: 100%; height: auto;">
            </div>
            <p><span th:text="${product.productName}">상품명</span></p>
          </a>
        </li>
      </ul>
    </div>
  </div>
  <div class="search_results_wrap">
    <ul class="search_results">
      <li></li>
    </ul>
    <div class="pagination"></div>
  </div>
</div>
</body>
<script src="/js/main/header.js" defer></script>
<script src="/js/main/product.js"></script>
<script>
  // 상품 카테고리 필터링 기능
  document.addEventListener('DOMContentLoaded', function () {
    const categoryItems = document.querySelectorAll('.product_cate');
    const productList = document.getElementById('product_list');

    // 카테고리 클릭 이벤트
    categoryItems.forEach(item => {
      item.addEventListener('click', function () {
        // 클릭된 카테고리 활성화
        categoryItems.forEach(item => item.classList.remove('active'));
        item.classList.add('active');

        // 필터링된 카테고리 이름 가져오기
        const selectedCategory = item.id;
        filterProductsByCategory(selectedCategory);
      });
    });

    // 카테고리에 따른 상품 필터링 함수
    function filterProductsByCategory(category) {
      const allProducts = document.querySelectorAll('.others_product li');

      allProducts.forEach(product => {
        // 각 상품에서 카테고리별 필터링을 할 수 있도록 데이터 처리 필요
        // 예를 들어 product 객체에서 카테고리를 체크해서 표시/숨기기 처리 가능
        if (product.classList.contains(category)) {
          product.style.display = 'block'; // 카테고리 일치하는 상품 보여주기
        } else {
          product.style.display = 'none'; // 카테고리 일치하지 않는 상품 숨기기
        }
      });
    }
  });
</script>
</html>
